<!DOCTYPE html>
<html>
<!-- The head tag is where we can put external js scripts, css sheets, or js libraries -->
<head>
	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="styling.css">
	
	<!-- JS Scripts -->
	<script src="buttons.js"></script>
	<script src="pythonDataRetrieve.js"></script>
	
	<!-- Libraries -->
    <script type="text/javascript" src="/eel.js"></script>
	
</head>

<body>
    <!-- These divs are mashed together because of how inline blocks behave with whitespace -->
    
    <!-- Left Side Block (list of all clients) -->
    <div class = "pageBlock" style = "width: 20%;">
        <div class = "fixedCont" style = "width: 20%; background-color: #434C5E;">
            
        </div>
        
        <div class = "fixedContTab" style = "width: 20%; background-color: #2E3440;">
            <h2 class = "buttonCont">Online (#)</h2>    
        </div>
    <!-- Middle Block (For the chat) -->
    </div><div class = "pageBlock" style = "width: 50%;">
    
        <div class = "pageBlock" style = "width: 50%; height: 75px;">
            <div class = "fixedContTab" style = "width: 50%; background-color: #3B4252;">
                <h2 class = "buttonCont">Insert Chat Name Here</h2>     
            </div>
        </div>
    
        <div class = "fixedContFoot" style = "width: 50%;">
            <input id = "client_msg" placeholder = "Send a Message...">
            <button id = "client_msg_btn">Send</button>
        </div>
    
        <div id = "chatList">
            
        </div>
    <!-- Right block for the settings -->
    </div><div class = "pageBlock" style = "width: 30%;">
        <div class = "fixedCont" style = "width: 30%; background-color: #3B4252;">
            
        </div>  
    
        <div class = "fixedContTab" style = "width: 30%; background-color: #2E3440;">
            <h2 class = "buttonCont">Settings</h2>      
        </div>
    </div>
        
	<script>
		let clientMsgInput = new Input("client_msg", "client_msg_btn");
        let clientInfo = {
            username: ""
        }
        
        //runs once when the page opens 
        //SET client info vals here with async calls
        window.onload = function(){
            let name = getUsername().then(function(name) {
                clientInfo.username = name;
                writeMsg("Welcome to the chat " + name + "!", "Server", 10);
            });
        }
        
        //writes a message to the screen (padding is optional parm that puts spacing on the top and bottom of a message)
        //isLocal should determain if the message is being written from the local client, false if its foreign
        eel.expose(writeMsg);
		function writeMsg(message, source, padding){
            let item = document.createElement("p");
            let msg;
            
            if(source != "local"){
                msg = document.createTextNode(source + "> " + message);
            }else{
                msg = document.createTextNode("You> " + message);    
            }

            item.className = "chatMsg";
            
            if(padding!=null){
                item.style = "padding-top: " + padding + "px; padding-bottom: " + padding + "px;";    
            }
            
            item.appendChild(msg);
            document.getElementById("chatList").appendChild(item);
            window.scrollTo(0,document.body.scrollHeight);
        }
    
	</script>
</body>
</html> 